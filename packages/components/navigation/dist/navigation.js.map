{"version":3,"file":null,"sources":["../src/navigation.ts"],"sourcesContent":["import $ from 'jquery';\n\n/**\n * Navigation component options interface.\n */\ninterface NavigationOptions {\n    /**\n     * Class name of navigation container. Flyout positions will be calculated\n     * relative to this element.\n     * @type {string}\n     */\n    containerClassName?: string;\n    /**\n     * Navigation list item element. It is used to enhance keyboard accessability.\n     * @type {string}\n     */\n    itemClassName?: string;\n    /**\n     * Navigation flyout class name.\n     * @type {string}\n     */\n    flyoutClassName?: string;\n    /**\n     * Navigation flyout columns container class name.\n     * @type {string}\n     */\n    flyoutColumnsClassName?: string;\n    /**\n     * Desired max height of the flyout. Number of columns will be decreased until\n     * flyout's height will be smaller then given max height.\n     * @type {number}\n     */\n    flyoutMaxHeight?: number;\n    /**\n     * Default number of colums set for flyout by CSS.\n     * @type {number}\n     */\n    flyoutDefaultColumnCount?: number;\n    /**\n     * Flyout class name that should be aplied to make it visible.\n     * @type {[type]}\n     */\n    flyoutVisibleClassName?: string;\n    /**\n     * Number of miliseconds to wait for next resize event before recalculating flyout positions.\n     * @type {number}\n     */\n    resizeDebounce?: number;\n    /**\n     * Number of miliseconds to wait after hovering the mouse over a link before showing the flyout.\n     * @type {number}\n     */\n    flyoutShowDelay?: number;\n};\n\n/**\n * Dropdown navigation that supports 3 category level links.\n */\nexport default class Navigation {\n    protected _$element: JQuery;\n    protected _$window: JQuery = $( window );\n    protected _$flyouts: JQuery;\n    protected _$container: JQuery;\n    protected _containerClientRect: ClientRect;\n    protected _eventListeners: {\n        resizeListener?: ( event: Event ) => void;\n        itemFocusInListener?: ( event: Event ) => void;\n        flyoutFocusInListener?: ( event: Event ) => void;\n        focusOutListener?: ( event: Event ) => void;\n        itemMouseenterListener?: ( event: Event ) => void;\n        itemMouseleaveListener?: ( event: Event ) => void;\n    } = {};\n    protected _resizeTimeout: number;\n    protected _showTimeout: number;\n\n    protected _options: NavigationOptions = {\n        containerClassName: 'navigation__list',\n        itemClassName: 'navigation__item',\n        flyoutClassName: 'navigation__flyout',\n        flyoutVisibleClassName: 'navigation__flyout--visible',\n        flyoutColumnsClassName: 'navigation__categories',\n        flyoutMaxHeight: 400,\n        flyoutDefaultColumnCount: 4,\n        resizeDebounce: 100,\n        flyoutShowDelay: 200,\n    };\n\n    /**\n     * Creates new navigation component on given jQuery element with optional settings.\n     * @param  {JQuery}            $element jQuery element to initialize navigation on.\n     * @param  {NavigationOptions} options  Optional settings object.\n     */\n    public constructor($element: JQuery, options?: NavigationOptions) {\n        // Don't throw errors if there is no navigation on the website.\n        if ( $element.length === 0 ) {\n            return;\n        }\n        this._$element = $element;\n        this._options = $.extend( this._options, options );\n        this._$flyouts = $element.find( `.${this._options.flyoutClassName}` );\n        this._$container = $element.find( `.${this._options.containerClassName}` );\n        this._containerClientRect = this._$container.get( 0 ).getBoundingClientRect();\n\n        this._adjustFlyouts( this._$flyouts );\n        this._attachEvents();\n    }\n\n    /**\n     * Destroys navigation component.\n     */\n    public destroy(): void {\n        this._detachEvents();\n    }\n\n    /**\n     * Adjusts flyout number of columns and positioning.\n     * @param {JQuery} $flyouts jQuery collection of flyouts.\n     */\n    protected _adjustFlyouts( $flyouts: JQuery ): void {\n        this._showFlyout( $flyouts );\n        this._setTransform( $flyouts, '' );\n        this._triggerReflow( $flyouts );\n\n        $flyouts.each(( index: number, flyout: HTMLElement ) => this._adjustFlyoutColumns( $( flyout ) ));\n        this._hideFlyout( $flyouts );\n\n        this._triggerReflow( $flyouts );\n        /**\n         * So Chrome has a bug which causes it to provide invalid width of the element\n         * when changing it's number of colums in JS, even when triggering reflows.\n         */\n        requestAnimationFrame( () => {\n            this._showFlyout( $flyouts );\n            this._triggerReflow( $flyouts );\n            $flyouts.each( ( index: number, flyout: HTMLElement ) => this._adjustFlyoutPosition( $( flyout ) ) );\n            this._hideFlyout( $flyouts );\n        });\n    }\n\n    /**\n     * Adjusts the number of flyout columns.\n     * The goal is to have as few columns as possible when keeping flyout's height bellow given max height.\n     * @param {JQuery} $flyout [description]\n     */\n    protected _adjustFlyoutColumns( $flyout: JQuery ): void {\n        const $flyoutColumns: JQuery = $flyout.find( `.${this._options.flyoutColumnsClassName}` );\n        const flyoutMaxHeight: number = this._options.flyoutMaxHeight;\n        let flyoutColumnCount: number = this._options.flyoutDefaultColumnCount - 1;\n        let flyoutHeight: number = $flyout.height();\n        let prevFlyoutHeight: number;\n\n        for ( ; flyoutColumnCount > 0; flyoutColumnCount -= 1 ) {\n            this._setColumnCount( $flyoutColumns, flyoutColumnCount );\n            prevFlyoutHeight = flyoutHeight;\n            flyoutHeight = $flyout.height();\n\n            if ( flyoutHeight !== prevFlyoutHeight && flyoutHeight >= flyoutMaxHeight ) {\n                if ( flyoutHeight >= flyoutMaxHeight + 100\n                    && flyoutColumnCount < this._options.flyoutDefaultColumnCount ) {\n                    this._setColumnCount( $flyoutColumns, flyoutColumnCount + 1 );\n                }\n                break;\n            }\n        }\n    }\n\n    /**\n     * Adjusts the position of the flyout so that the center of flyout columns\n     * section is aligned to the center of trigger element as close as possible.\n     * @param {JQuery} $flyout jQuery flyout element collection.\n     */\n    protected _adjustFlyoutPosition( $flyout: JQuery ): void {\n        const $flyoutColumns: JQuery = $flyout.find( `.${this._options.flyoutColumnsClassName}` );\n        const flyoutClientRect: ClientRect = $flyout.get( 0 ).getBoundingClientRect();\n        const containerClientRect: ClientRect = this._containerClientRect;\n        const flyoutColumnsClientRect: ClientRect = $flyoutColumns.get( 0 ).getBoundingClientRect();\n        const flyoutTriggerClientRect: ClientRect = $flyout.parent().get( 0 ).getBoundingClientRect();\n\n        // Check if flyout takes all width, if it does we don't have to calculate anything.\n        if ( flyoutClientRect.width === containerClientRect.width ) {\n            return;\n        }\n\n        // Align center of columns with links to center of the flyout trigger.\n        let flyoutTransformLeft: number = Math.max( 0, flyoutTriggerClientRect.left - containerClientRect.left + flyoutTriggerClientRect.width / 2 -\n            flyoutColumnsClientRect.width / 2  );\n        // Check if flyout would overflow container on the right.\n        if ( flyoutTransformLeft + flyoutClientRect.right > containerClientRect.right ) {\n            // If it would then stick it to the right side.\n            flyoutTransformLeft = Math.floor( containerClientRect.width - flyoutClientRect.width );\n        }\n\n        this._setTransform( $flyout, `translateX(${flyoutTransformLeft}px)` );\n    }\n\n    /**\n     * Sets the number of columns for the given element.\n     * @param  {JQuery} $element    Element to set property to.\n     * @param  {number} columnCount Number of columns to set.\n     */\n    protected _setColumnCount( $element: JQuery, columnCount: number ): void {\n        $element.css( {\n            'column-count': columnCount,\n        } );\n    }\n\n    /**\n     * Sets transform CSS property on a given element.\n     * @param  {JQuery} $element  Element to set transform to.\n     * @param  {string} transform Transform value string.\n     */\n    protected _setTransform( $element: JQuery, transform: string ): void {\n        $element.css( {\n            transform: transform,\n        } );\n    }\n\n    /**\n     * Makes given flyout visible by applying appropriate class.\n     * @param {JQuery} $flyout Target flyout to set class to.\n     */\n    protected _showFlyout( $flyout: JQuery ): void {\n        $flyout.addClass( this._options.flyoutVisibleClassName );\n    }\n\n    /**\n     * Makes given flyout visible by applying appropriate class with short delay.\n     * @param {JQuery} $flyout Target flyout to set class to.\n     */\n    protected _showFlyoutDelay( $flyout: JQuery ): void {\n        this._showTimeout = setTimeout(() => {\n            $flyout.addClass( this._options.flyoutVisibleClassName );\n        }, this._options.flyoutShowDelay);\n    }\n\n    /**\n     * Makes given flyout visible by applying appropriate class with short delay.\n     * @param {JQuery} $flyout Target flyout to set class to.\n     */\n    protected _resetFlyoutDelay(): void {\n        clearTimeout( this._showTimeout );\n    }\n\n    /**\n     * Hides given flyout by applying appropriate class.\n     * @param {JQuery} $flyout Target flyout to remove class from.\n     */\n    protected _hideFlyout( $flyout: JQuery ): void {\n        $flyout.removeClass( this._options.flyoutVisibleClassName );\n    }\n\n    /**\n     * Triggers browser layout reflow so we can get updated CSS values.\n     * @param  {JQuery} $element Element to use to trigger reflow.\n     */\n    protected _triggerReflow( $element: JQuery ): void {\n        $element.prop( 'offsetWidth' );\n    }\n\n    /**\n     * Attaches events needed by navigation component.\n     */\n    protected _attachEvents(): void {\n        this._eventListeners.resizeListener = (): void => {\n            clearTimeout( this._resizeTimeout );\n            setTimeout( () => {\n                this._containerClientRect = this._$container.get( 0 ).getBoundingClientRect();\n                this._adjustFlyouts( this._$flyouts );\n            }, this._options.resizeDebounce );\n        };\n        this._$window.on( 'resize orientationchange', this._eventListeners.resizeListener );\n\n        this._eventListeners.itemFocusInListener = ( event: Event ): void => {\n            const $targetFlyout: JQuery = $( event.target ).parent().find( `.${ this._options.flyoutClassName }` );\n            this._hideFlyout( this._$flyouts.not( $targetFlyout ) );\n            this._showFlyout( $targetFlyout );\n        };\n        // Don't let focus events propagate from flyouts to items.\n        this._eventListeners.flyoutFocusInListener = ( event: Event ): void => {\n            event.stopPropagation();\n        };\n\n        this._eventListeners.focusOutListener = ( event: Event ): void => {\n            this._hideFlyout(\n                $( event.target )\n                    .closest( `.${this._options.itemClassName}` )\n                    .find( `.${ this._options.flyoutClassName }` ),\n            );\n        };\n\n        this._eventListeners.itemMouseenterListener = ( event: Event ): void => {\n            this._showFlyoutDelay(\n                $( event.target )\n                    .closest( `.${this._options.itemClassName}` )\n                    .find( `.${ this._options.flyoutClassName }` ),\n            );\n        };\n\n        this._eventListeners.itemMouseleaveListener = ( event: Event ): void => {\n            clearTimeout( this._showTimeout );\n            this._hideFlyout(\n                $( event.target )\n                    .closest( `.${this._options.itemClassName}` )\n                    .find( `.${ this._options.flyoutClassName }` ),\n            );\n        };\n\n        const $items: JQuery = $( `.${this._options.itemClassName}` );\n        $items.on( 'focusin', this._eventListeners.itemFocusInListener );\n        $items.on( 'mouseenter', this._eventListeners.itemMouseenterListener );\n        $items.on( 'mouseleave', this._eventListeners.itemMouseleaveListener );\n        this._$flyouts.on( 'focusin', this._eventListeners.flyoutFocusInListener );\n        // When the last link from flyout loses focus.\n        $items.find( 'a:last' ).on( 'focusout', this._eventListeners.focusOutListener );\n    }\n\n    /**\n     * Detaches events set by navigation component.\n     */\n    protected _detachEvents(): void {\n        this._$window.off( 'resize orientationchange', this._eventListeners.resizeListener );\n\n        const $items: JQuery = $( `.${this._options.itemClassName}` );\n        $items.off( 'mouseenter', this._eventListeners.itemMouseenterListener );\n        $items.off( 'mouseleave', this._eventListeners.itemMouseleaveListener );\n        $items.off( 'focusin', this._eventListeners.itemFocusInListener );\n        this._$flyouts.off( 'focusin', this._eventListeners.flyoutFocusInListener );\n        // When the last link from flyout loses focus.\n        $items.find( 'a:last' ).off( 'focusout', this._eventListeners.focusOutListener );\n    }\n}\n"],"names":[],"mappings":";;;;;;;;AAuDA;;;AAGe;;;;;;IAkCX,oBAAmB,QAAgB,EAAE,OAA2B;QAhCtD,aAAQ,GAAW,CAAC,CAAE,MAAM,CAAE,CAAC;QAI/B,oBAAe,GAOrB,EAAE,CAAC;QAIG,aAAQ,GAAsB;YACpC,kBAAkB,EAAE,kBAAkB;YACtC,aAAa,EAAE,kBAAkB;YACjC,eAAe,EAAE,oBAAoB;YACrC,sBAAsB,EAAE,6BAA6B;YACrD,sBAAsB,EAAE,wBAAwB;YAChD,eAAe,EAAE,GAAG;YACpB,wBAAwB,EAAE,CAAC;YAC3B,cAAc,EAAE,GAAG;YACnB,eAAe,EAAE,GAAG;SACvB,CAAC;;QASE,IAAK,QAAQ,CAAC,MAAM,KAAK,CAAE,EAAE;YACzB,OAAO;SACV;QACD,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAE,CAAC;QACnD,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAE,MAAI,IAAI,CAAC,QAAQ,CAAC,eAAiB,CAAE,CAAC;QACtE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAE,MAAI,IAAI,CAAC,QAAQ,CAAC,kBAAoB,CAAE,CAAC;QAC3E,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAE,CAAC,CAAE,CAAC,qBAAqB,EAAE,CAAC;QAE9E,IAAI,CAAC,cAAc,CAAE,IAAI,CAAC,SAAS,CAAE,CAAC;QACtC,IAAI,CAAC,aAAa,EAAE,CAAC;KACxB;;;;IAKM,4BAAO,GAAd;QACI,IAAI,CAAC,aAAa,EAAE,CAAC;KACxB;;;;;IAMS,mCAAc,GAAxB,UAA0B,QAAgB;QAA1C,iBAmBC;QAlBG,IAAI,CAAC,WAAW,CAAE,QAAQ,CAAE,CAAC;QAC7B,IAAI,CAAC,aAAa,CAAE,QAAQ,EAAE,EAAE,CAAE,CAAC;QACnC,IAAI,CAAC,cAAc,CAAE,QAAQ,CAAE,CAAC;QAEhC,QAAQ,CAAC,IAAI,CAAC,UAAE,KAAa,EAAE,MAAmB,IAAM,OAAA,KAAI,CAAC,oBAAoB,CAAE,CAAC,CAAE,MAAM,CAAE,CAAE,GAAA,CAAC,CAAC;QAClG,IAAI,CAAC,WAAW,CAAE,QAAQ,CAAE,CAAC;QAE7B,IAAI,CAAC,cAAc,CAAE,QAAQ,CAAE,CAAC;;;;;QAKhC,qBAAqB,CAAE;YACnB,KAAI,CAAC,WAAW,CAAE,QAAQ,CAAE,CAAC;YAC7B,KAAI,CAAC,cAAc,CAAE,QAAQ,CAAE,CAAC;YAChC,QAAQ,CAAC,IAAI,CAAE,UAAE,KAAa,EAAE,MAAmB,IAAM,OAAA,KAAI,CAAC,qBAAqB,CAAE,CAAC,CAAE,MAAM,CAAE,CAAE,GAAA,CAAE,CAAC;YACrG,KAAI,CAAC,WAAW,CAAE,QAAQ,CAAE,CAAC;SAChC,CAAC,CAAC;KACN;;;;;;IAOS,yCAAoB,GAA9B,UAAgC,OAAe;QAC3C,IAAM,cAAc,GAAW,OAAO,CAAC,IAAI,CAAE,MAAI,IAAI,CAAC,QAAQ,CAAC,sBAAwB,CAAE,CAAC;QAC1F,IAAM,eAAe,GAAW,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;QAC9D,IAAI,iBAAiB,GAAW,IAAI,CAAC,QAAQ,CAAC,wBAAwB,GAAG,CAAC,CAAC;QAC3E,IAAI,YAAY,GAAW,OAAO,CAAC,MAAM,EAAE,CAAC;QAC5C,IAAI,gBAAwB,CAAC;QAE7B,OAAQ,iBAAiB,GAAG,CAAC,EAAE,iBAAiB,IAAI,CAAC,EAAG;YACpD,IAAI,CAAC,eAAe,CAAE,cAAc,EAAE,iBAAiB,CAAE,CAAC;YAC1D,gBAAgB,GAAG,YAAY,CAAC;YAChC,YAAY,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;YAEhC,IAAK,YAAY,KAAK,gBAAgB,IAAI,YAAY,IAAI,eAAgB,EAAE;gBACxE,IAAK,YAAY,IAAI,eAAe,GAAG,GAAG;uBACnC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC,wBAAyB,EAAE;oBAChE,IAAI,CAAC,eAAe,CAAE,cAAc,EAAE,iBAAiB,GAAG,CAAC,CAAE,CAAC;iBACjE;gBACD,MAAM;aACT;SACJ;KACJ;;;;;;IAOS,0CAAqB,GAA/B,UAAiC,OAAe;QAC5C,IAAM,cAAc,GAAW,OAAO,CAAC,IAAI,CAAE,MAAI,IAAI,CAAC,QAAQ,CAAC,sBAAwB,CAAE,CAAC;QAC1F,IAAM,gBAAgB,GAAe,OAAO,CAAC,GAAG,CAAE,CAAC,CAAE,CAAC,qBAAqB,EAAE,CAAC;QAC9E,IAAM,mBAAmB,GAAe,IAAI,CAAC,oBAAoB,CAAC;QAClE,IAAM,uBAAuB,GAAe,cAAc,CAAC,GAAG,CAAE,CAAC,CAAE,CAAC,qBAAqB,EAAE,CAAC;QAC5F,IAAM,uBAAuB,GAAe,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,CAAE,CAAC,CAAE,CAAC,qBAAqB,EAAE,CAAC;;QAG9F,IAAK,gBAAgB,CAAC,KAAK,KAAK,mBAAmB,CAAC,KAAM,EAAE;YACxD,OAAO;SACV;;QAGD,IAAI,mBAAmB,GAAW,IAAI,CAAC,GAAG,CAAE,CAAC,EAAE,uBAAuB,CAAC,IAAI,GAAG,mBAAmB,CAAC,IAAI,GAAG,uBAAuB,CAAC,KAAK,GAAG,CAAC;YACtI,uBAAuB,CAAC,KAAK,GAAG,CAAC,CAAG,CAAC;;QAEzC,IAAK,mBAAmB,GAAG,gBAAgB,CAAC,KAAK,GAAG,mBAAmB,CAAC,KAAM,EAAE;;YAE5E,mBAAmB,GAAG,IAAI,CAAC,KAAK,CAAE,mBAAmB,CAAC,KAAK,GAAG,gBAAgB,CAAC,KAAK,CAAE,CAAC;SAC1F;QAED,IAAI,CAAC,aAAa,CAAE,OAAO,EAAE,gBAAc,mBAAmB,QAAK,CAAE,CAAC;KACzE;;;;;;IAOS,oCAAe,GAAzB,UAA2B,QAAgB,EAAE,WAAmB;QAC5D,QAAQ,CAAC,GAAG,CAAE;YACV,cAAc,EAAE,WAAW;SAC9B,CAAE,CAAC;KACP;;;;;;IAOS,kCAAa,GAAvB,UAAyB,QAAgB,EAAE,SAAiB;QACxD,QAAQ,CAAC,GAAG,CAAE;YACV,SAAS,EAAE,SAAS;SACvB,CAAE,CAAC;KACP;;;;;IAMS,gCAAW,GAArB,UAAuB,OAAe;QAClC,OAAO,CAAC,QAAQ,CAAE,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAE,CAAC;KAC5D;;;;;IAMS,qCAAgB,GAA1B,UAA4B,OAAe;QAA3C,iBAIC;QAHG,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC;YAC3B,OAAO,CAAC,QAAQ,CAAE,KAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAE,CAAC;SAC5D,EAAE,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;KACrC;;;;;IAMS,sCAAiB,GAA3B;QACI,YAAY,CAAE,IAAI,CAAC,YAAY,CAAE,CAAC;KACrC;;;;;IAMS,gCAAW,GAArB,UAAuB,OAAe;QAClC,OAAO,CAAC,WAAW,CAAE,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAE,CAAC;KAC/D;;;;;IAMS,mCAAc,GAAxB,UAA0B,QAAgB;QACtC,QAAQ,CAAC,IAAI,CAAE,aAAa,CAAE,CAAC;KAClC;;;;IAKS,kCAAa,GAAvB;QAAA,iBAoDC;QAnDG,IAAI,CAAC,eAAe,CAAC,cAAc,GAAG;YAClC,YAAY,CAAE,KAAI,CAAC,cAAc,CAAE,CAAC;YACpC,UAAU,CAAE;gBACR,KAAI,CAAC,oBAAoB,GAAG,KAAI,CAAC,WAAW,CAAC,GAAG,CAAE,CAAC,CAAE,CAAC,qBAAqB,EAAE,CAAC;gBAC9E,KAAI,CAAC,cAAc,CAAE,KAAI,CAAC,SAAS,CAAE,CAAC;aACzC,EAAE,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAE,CAAC;SACrC,CAAC;QACF,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAE,0BAA0B,EAAE,IAAI,CAAC,eAAe,CAAC,cAAc,CAAE,CAAC;QAEpF,IAAI,CAAC,eAAe,CAAC,mBAAmB,GAAG,UAAE,KAAY;YACrD,IAAM,aAAa,GAAW,CAAC,CAAE,KAAK,CAAC,MAAM,CAAE,CAAC,MAAM,EAAE,CAAC,IAAI,CAAE,MAAK,KAAI,CAAC,QAAQ,CAAC,eAAkB,CAAE,CAAC;YACvG,KAAI,CAAC,WAAW,CAAE,KAAI,CAAC,SAAS,CAAC,GAAG,CAAE,aAAa,CAAE,CAAE,CAAC;YACxD,KAAI,CAAC,WAAW,CAAE,aAAa,CAAE,CAAC;SACrC,CAAC;;QAEF,IAAI,CAAC,eAAe,CAAC,qBAAqB,GAAG,UAAE,KAAY;YACvD,KAAK,CAAC,eAAe,EAAE,CAAC;SAC3B,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC,gBAAgB,GAAG,UAAE,KAAY;YAClD,KAAI,CAAC,WAAW,CACZ,CAAC,CAAE,KAAK,CAAC,MAAM,CAAE;iBACZ,OAAO,CAAE,MAAI,KAAI,CAAC,QAAQ,CAAC,aAAe,CAAE;iBAC5C,IAAI,CAAE,MAAK,KAAI,CAAC,QAAQ,CAAC,eAAkB,CAAE,CACrD,CAAC;SACL,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC,sBAAsB,GAAG,UAAE,KAAY;YACxD,KAAI,CAAC,gBAAgB,CACjB,CAAC,CAAE,KAAK,CAAC,MAAM,CAAE;iBACZ,OAAO,CAAE,MAAI,KAAI,CAAC,QAAQ,CAAC,aAAe,CAAE;iBAC5C,IAAI,CAAE,MAAK,KAAI,CAAC,QAAQ,CAAC,eAAkB,CAAE,CACrD,CAAC;SACL,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC,sBAAsB,GAAG,UAAE,KAAY;YACxD,YAAY,CAAE,KAAI,CAAC,YAAY,CAAE,CAAC;YAClC,KAAI,CAAC,WAAW,CACZ,CAAC,CAAE,KAAK,CAAC,MAAM,CAAE;iBACZ,OAAO,CAAE,MAAI,KAAI,CAAC,QAAQ,CAAC,aAAe,CAAE;iBAC5C,IAAI,CAAE,MAAK,KAAI,CAAC,QAAQ,CAAC,eAAkB,CAAE,CACrD,CAAC;SACL,CAAC;QAEF,IAAM,MAAM,GAAW,CAAC,CAAE,MAAI,IAAI,CAAC,QAAQ,CAAC,aAAe,CAAE,CAAC;QAC9D,MAAM,CAAC,EAAE,CAAE,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAE,CAAC;QACjE,MAAM,CAAC,EAAE,CAAE,YAAY,EAAE,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAE,CAAC;QACvE,MAAM,CAAC,EAAE,CAAE,YAAY,EAAE,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAE,CAAC;QACvE,IAAI,CAAC,SAAS,CAAC,EAAE,CAAE,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAE,CAAC;;QAE3E,MAAM,CAAC,IAAI,CAAE,QAAQ,CAAE,CAAC,EAAE,CAAE,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAE,CAAC;KACnF;;;;IAKS,kCAAa,GAAvB;QACI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAE,0BAA0B,EAAE,IAAI,CAAC,eAAe,CAAC,cAAc,CAAE,CAAC;QAErF,IAAM,MAAM,GAAW,CAAC,CAAE,MAAI,IAAI,CAAC,QAAQ,CAAC,aAAe,CAAE,CAAC;QAC9D,MAAM,CAAC,GAAG,CAAE,YAAY,EAAE,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAE,CAAC;QACxE,MAAM,CAAC,GAAG,CAAE,YAAY,EAAE,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAE,CAAC;QACxE,MAAM,CAAC,GAAG,CAAE,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,mBAAmB,CAAE,CAAC;QAClE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAE,SAAS,EAAE,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAE,CAAC;;QAE5E,MAAM,CAAC,IAAI,CAAE,QAAQ,CAAE,CAAC,GAAG,CAAE,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAE,CAAC;KACpF;IACL,iBAAC;CAAA,IAAA,AAED;;;;"}
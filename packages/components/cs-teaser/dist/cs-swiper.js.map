{"version":3,"file":null,"sources":["../src/cs-swiper.ts"],"sourcesContent":["import $ from 'jQuery';\n//import Swiper from 'Swiper';\n\n/*\n* Product teaser\n*/\n/**\n * Creates new teaser object on given element with provided settings.\n * @param  {jQuery} $element jQuery element that contains complete outline for teaser.\n * Provided element should contain \".{teaserName}__wrapper\" element.\n * @param  {Object} settings Custom settings that will be passed along to Swiper.\n * @return {Object} New teaser object instance.\n */\nconst CsTeaser = function( $element, settings ) {\n    /**\n     * Required variables initialization.\n     */\n    settings = settings || {};\n    const teaser = this;\n    const teaserName = settings.teaserName ? settings.teaserName : 'cs-teaser';\n    const teaserClass = `.${teaserName}`;\n    const $teaserWrapper = $element.find( `${teaserClass}__wrapper` );\n    const paginationName = settings.paginationName ? settings.paginationName : `${teaserName}__pagination`;\n    const $pagination = $element.find( `.${paginationName}` );\n    const $teaserNumbers = $element.find( `${teaserClass}-numbers` );\n    const $teaserNumbersCurrent = $teaserNumbers.children( `${teaserClass}-number--current` );\n    const $teaserNumbersTotal = $teaserNumbers.children( `${teaserClass}-number--total` );\n    /**\n     * Holds current Swiper instance.\n     */\n    let swiperInstance;\n\n    /**\n     * Attaches component to HTML element.\n     */\n    $element.data( teaserName, this );\n\n    /**\n     * Tells if teaser should have dynamic or fixed number of visible slides.\n     * By default teaser will adjust number of visible slides according to it's\n     * parrent width. You can change this behaviour by specyfying custom settings.slidesPerView\n     * value, e.g. when settings.slidesPerView = 1 teaser will always show only one slide.\n     * @type {Boolean}\n     */\n    let dynamicNumOfSlides = !settings.slidesPerView || settings.slidesPerView === 'auto';\n\n    /**\n     * Contains current settings of slider.\n     */\n    let currentSettings;\n    /**\n     * Default settings for Swiper.\n     * @type {Object}\n     */\n    const defaultSettings = {\n        slideClass: `${teaserName}__slide`,\n        slideActiveClass: `${teaserName}__slide--active`,\n        slideVisibleClass: `${teaserName}__slide--visible`,\n        slideDuplicateClass: `${teaserName}__slide--clone`,\n        slideNextClass: `${teaserName}__button--next`,\n        slidePrevClass: `${teaserName}__button--prev`,\n        wrapperClass: `${teaserName}__slides`,\n        nextButton: $element.find( `${teaserClass}__nav--next` )[ 0 ],\n        prevButton: $element.find( `${teaserClass}__nav--prev` )[ 0 ],\n        /**\n         * Maximum number of groups that will be still visible as rhombs.\n         * If you want pagination to always be rhombs you can either don't add\n         * .rc-product-teaser__numbers element in HTML or set this to something big.\n         * @type {number}\n         */\n        paginationBreakpoint: 5,\n        bulletClass: `${paginationName}__item`,\n        bulletActiveClass: `${paginationName}__item--active`,\n        paginationClickable: true,\n        spaceBetween: 28,   // Gap between slides.\n        slideMinWidth: 150,  // Minimum width of a slider.\n        watchSlidesVisibility: true,\n    };\n    currentSettings = $.extend( defaultSettings, settings );\n\n    /**\n     * Calculates number of slides that should be visible according to teaser's wrapper width.\n     * @return {number} Number of slides.\n     */\n    const calculateSlidesNumber = function() {\n        return Math.floor( $teaserWrapper.innerWidth() / ( currentSettings.slideMinWidth + currentSettings.spaceBetween ) );\n    };\n\n    if ( dynamicNumOfSlides ) {\n        currentSettings.slidesPerView =\n            currentSettings.slidesPerGroup = calculateSlidesNumber();\n    }\n\n    /**\n     * Renders dot(rhomb) pagination.\n     * @param  {number} totalGroupNumber Total number of groups.\n     */\n    const renderDotPagination = function( totalGroupNumber ) {\n        $pagination.empty();\n        for ( let groupIndex = 0; groupIndex < totalGroupNumber; groupIndex = groupIndex + 1 ) {\n            let dotClass = '';\n            if ( groupIndex === Math.ceil( swiperInstance.activeIndex / swiperInstance.params.slidesPerGroup ) ) {\n                dotClass = swiperInstance.params.bulletActiveClass;\n            }\n\n            $pagination.append( `<li class=\"${swiperInstance.params.bulletClass} ${dotClass}\">\n                <button class=\"${paginationName}__button\">${( groupIndex + 1 )}</button></li>`\n            );\n        }\n\n        $teaserNumbers.removeClass( `${teaserName}__numbers--visible` );\n        $pagination.removeClass( `${paginationName}--hidden` );\n    };\n\n    /**\n     * Swipes on pagination click to appropriate slide.\n     * @param  {Object} event Event Object\n     */\n    const clickDotPagination = function( event ) {\n        event.preventDefault();\n        swiperInstance.slideTo( $( this ).index() * swiperInstance.params.slidesPerView );\n    };\n\n    /**\n     * Renders number pagination.\n     * @param  {number} totalGroupNumber Total number of groups.\n     */\n    const renderNumberPagination = function( totalGroupNumber ) {\n        const currentGroupIndex = Math.ceil( swiperInstance.activeIndex / swiperInstance.params.slidesPerGroup + 1 );\n        $teaserNumbersCurrent.text( currentGroupIndex );\n        $teaserNumbersTotal.text( totalGroupNumber );\n\n        $pagination.addClass( `${paginationName}--hidden` );\n        $teaserNumbers.addClass( `${teaserName}__numbers--visible` );\n    };\n\n    /**\n     * Updates pagination by adjusting it's type and contents e.g. after window resize.\n     */\n    const updatePagination = function() {\n        if ( $teaserNumbers.length && swiperInstance.params.paginationBreakpoint ) {\n            const totalSlidesNumber = $teaserNumbersTotal.attr( `data-${teaserName}-total` ) || swiperInstance.slides.length;\n            const totalGroupNumber = Math.ceil( totalSlidesNumber / swiperInstance.params.slidesPerGroup );\n            if ( totalGroupNumber > swiperInstance.params.paginationBreakpoint ) {\n                renderNumberPagination( totalGroupNumber );\n            } else {\n                renderDotPagination( totalGroupNumber );\n            }\n        }\n    };\n    currentSettings.onSlideChangeStart = updatePagination; // Update navigation after every// slide switch.\n\n    /**\n     * Updates slider sizing by adjusting number of visible slides and pagination.\n     */\n    const updateSliderSizing = function() {\n        if ( !$element.is( ':visible' ) ) {\n            return null;\n        }\n\n        if ( dynamicNumOfSlides ) {\n            currentSettings.slidesPerView =\n                currentSettings.slidesPerGroup = calculateSlidesNumber();\n        }\n        swiperInstance.params = $.extend( swiperInstance.params, currentSettings );\n        updatePagination();\n        swiperInstance.update();\n    };\n\n    swiperInstance = new Swiper( $element.find( `${teaserClass}__wrapper` ), currentSettings );\n    updatePagination();\n    $( window ).on( 'resize', updateSliderSizing );\n    $pagination.on( 'click', `.${paginationName}__item`, clickDotPagination );\n\n    /**\n     * Returns Swiper object.\n     * @return {Swiper} Swiper object.\n     */\n    teaser.getSwiper = function() {\n        return swiperInstance;\n    };\n\n    /**\n     * Updates teaser with new settings.\n     * @param  {Object} settings New settings to apply.\n     */\n    teaser.update = function( settings ) {\n        settings = settings || {};\n        currentSettings = $.extend( currentSettings, settings );\n        swiperInstance.params = $.extend( swiperInstance.params, currentSettings );\n        dynamicNumOfSlides = !settings.slidesPerView || settings.slidesPerView === 'auto';\n        updateSliderSizing();\n    };\n\n    /**\n     * Destroyes teaser.\n     */\n    teaser.destroy = function() {\n        $( window ).off( 'resize', updatePagination );\n        $pagination.off( 'click', `.${paginationName}__item`,\n            clickDotPagination\n        );\n        swiperInstance.destroy();\n    };\n};\n\n/**\n * Initializes every teaser with \"data-rc-product-teaser\" attribute with default settings.\n */\n$( '[data-rc-product-teaser]' ).each( function() {\n    return new CsTeaser( $( this ) );\n} );\n\nexport { CsTeaser };"],"names":[],"mappings":"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"}
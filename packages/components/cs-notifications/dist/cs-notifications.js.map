{"version":3,"file":null,"sources":["../src/class.notification.ts","../src/class.notifications.ts","../src/cs-notifications.ts"],"sourcesContent":["import $ from 'jQuery';\n\ninterface INotification {\n    getMessage(): string;\n    getType(): string;\n    remove(): void;\n    setType(type: INotificationType): void;\n    hide(hiddenClassName?: string): void;\n    show(): void;\n    getTemplate(): JQuery;\n}\n\ninterface INotificationSettings {\n    notificationHTML: string|JQuery;\n    textSelector: string|JQuery;\n    iconSelector?: string|JQuery;\n    onClose?(): any;\n    onAdd?(): any;\n}\n\ninterface INotificationType {\n    name: string;\n    iconHTML?: string;\n    textClass?: string;\n}\n\nclass Notification {\n    public message: string = null;\n\n    protected _type: INotificationType = {\n        name: 'default',\n        iconHTML: null,\n        textClass: null,\n    };\n\n    private _defaults: INotificationSettings = {\n        notificationHTML: null,\n        textSelector: null,\n        iconSelector: null,\n        onClose: null,\n        onAdd: null,\n    };\n\n    private _settings: INotificationSettings = null;\n\n    private _$template: JQuery = null;\n\n    // If once set hidden by adding class name, will store it and reuse it\n    private _hiddenClassName: string = null;\n\n    constructor(message: string, settings: INotificationSettings) {\n\n        this._settings = $.extend(this._defaults, settings);\n\n        this.message = message;\n    }\n\n    public getMessage(): string {\n        return this.message;\n    }\n\n    public getType(): string {\n        return this._type.name;\n    }\n\n    public remove(): void {\n        this._$template.remove();\n    }\n\n    public setType(type: INotificationType): void {\n        this._type = type;\n    }\n\n    public hide(className?: string): void {\n        if (className) {\n            this._$template.addClass(className);\n            this._hiddenClassName = className;\n\n        } else if (this._hiddenClassName) {\n            this._$template.addClass(this._hiddenClassName);\n\n        } else {\n            this._$template.hide();\n\n        }\n    }\n\n    public show(): void {\n        if (this._$template.hasClass(this._hiddenClassName)) {\n            this._$template.removeClass(this._hiddenClassName);\n        } else {\n            this._$template.show();\n        }\n    }\n\n    public getTemplate(): JQuery {\n        if (!this._$template) {\n            this._$template = this._compileTemplate();\n        }\n        return this._$template;\n    }\n\n    private _compileTemplate(): JQuery {\n        let $html: JQuery = $(this._settings.notificationHTML).clone();\n        let $text: JQuery = $html.find(this._settings.textSelector);\n        let $iconPlaceholder: JQuery = null;\n\n        $text.text(this.message);\n        $text.addClass(this._type.textClass);\n\n        if (this._settings.iconSelector) {\n            $iconPlaceholder = $html.find(this._settings.iconSelector);\n            $iconPlaceholder.after(this._type.iconHTML);\n            $iconPlaceholder.remove();\n        }\n\n        this._$template = $html;\n\n        return $html;\n\n    }\n}\n\nexport {INotification, INotificationSettings, INotificationType, Notification};\n","import $ from 'jQuery';\n\nimport { Notification } from './class.notification';\n\ninterface INotificationsManager {\n    init(): void;\n    addNotification(notification: Notification): void;\n    removeNotification(notification: Notification): void;\n    getNotifications(): Notification[];\n\n}\n\ninterface INotificationsManagerSettings {\n    callback?: {\n        notificationAdded?(): any;\n        notificationRemoved?(): any;\n        notificationClosed?(): any;\n    };\n    $componentSelector: JQuery;\n    $closeComponentSelector?: JQuery;\n    deleteOnClose?: boolean;\n}\n\nclass NotificationsManager implements INotificationsManager {\n\n    private _defaults: INotificationsManagerSettings = {\n        callback: {\n            notificationAdded: null,\n            notificationRemoved: null,\n            notificationClosed: null,\n        },\n        $componentSelector: null,\n        $closeComponentSelector: null,\n    };\n\n    private _settings: INotificationsManagerSettings = null;\n\n    private _notificationsList: Notification[] = [];\n\n    constructor(settings: INotificationsManagerSettings) {\n\n        this._settings = $.extend(this._defaults, settings, true);\n\n    }\n\n    public init(): void {\n        this._bindEvents();\n    }\n\n    public addNotification(notification: Notification): void {\n\n        this._notificationsList.push(notification);\n\n        this._printNotification(notification.getTemplate());\n\n    }\n\n    public removeNotification(notification: Notification): void {\n\n        notification.remove();\n\n        let arrayPos: number = this._notificationsList.indexOf(notification);\n        this._notificationsList.splice(arrayPos, 1);\n\n        if (this._settings.callback.notificationRemoved) {\n            this._settings.callback.notificationRemoved();\n\n        }\n\n    }\n\n    public getNotifications(): Notification[] {\n        return this._notificationsList;\n    }\n\n    private _printNotification(template: HTMLElement|JQuery): void {\n        this._settings.$componentSelector.append(template);\n\n        if (this._settings.callback.notificationAdded) {\n            this._settings.callback.notificationAdded();\n\n        }\n\n    }\n\n    private _close(): void {\n        if (this._settings.callback.notificationClosed) {\n            this._settings.callback.notificationClosed();\n\n        }\n\n        if (this._settings.deleteOnClose) {\n            for (let notification: Notification of this._notificationsList) {\n                notification.remove();\n            }\n        }\n    }\n\n    private _bindEvents(): void {\n        if (this._settings.$closeComponentSelector) {\n            this._settings.$closeComponentSelector.on('click', (e: Event) => {\n                e.preventDefault();\n                this._close();\n\n            });\n\n        }\n\n    }\n}\n\nexport {INotificationsManager, INotificationsManagerSettings, NotificationsManager};\n","import { INotificationSettings, INotificationType, Notification } from './class.notification';\nimport { INotificationsManager, INotificationsManagerSettings, NotificationsManager } from './class.notifications';\n\nlet nmSettings: INotificationsManagerSettings = {\n    $componentSelector: $('.cs-notifications'),\n    $closeComponentSelector: $('.cs-notifications__close'),\n    callback: {\n        notificationClosed(): void {\n            $('.cs-notifications').hide();\n        },\n    },\n    deleteOnClose: true,\n};\n\nlet notificationsManager: INotificationsManager = new NotificationsManager(nmSettings);\nnotificationsManager.init();\n\nlet notificationConfig: INotificationSettings = {\n    notificationHTML: '<li class=\"cs-notifications__item\"><div class=\"cs-notifications__item-icon\"></div><span class=\"cs-notifications__item-text\"></span></li>',\n    textSelector: '.cs-notifications__item-text',\n    iconSelector: '.cs-notifications__item-icon',\n\n};\n\nlet negativeType: INotificationType = {\n    name: 'negative',\n    textClass: 'cs-notifications__item-text--negative',\n};\n\nclass NegativeNotification extends Notification {\n    constructor(message: string, settings: INotificationSettings) {\n        super(message, settings);\n\n        this._type = negativeType;\n\n    }\n}\n\nlet not1: Notification = new Notification('notification message default style', notificationConfig);\nlet not2: Notification = new NegativeNotification('negative message via extended notification class with another \"Type\"', notificationConfig);\nwindow.n = not1;\nnotificationsManager.addNotification(not1);\nnotificationsManager.addNotification(not2);\n\n$('#newNot').click(function (): void {\n    notificationsManager.addNotification(new Notification('new notification added', notificationConfig));\n});\n"],"names":["$"],"mappings":"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"}
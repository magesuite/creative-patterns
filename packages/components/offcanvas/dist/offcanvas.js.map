{"version":3,"file":null,"sources":["../src/offcanvas.ts"],"sourcesContent":["import $ from 'jquery';\n\n/**\n * Component options interface.\n */\nexport interface OffcanvasOptions {\n    className?: string;\n    triggerSelector?: string;\n    closeOnBlur?: boolean;\n    drawerTransitionDuration?: number;\n    overlayTransitionDuration?: number;\n};\n\nexport default class Offcanvas {\n    protected _$element: JQuery;\n    protected _$overlay: JQuery;\n    protected _$drawer: JQuery;\n    protected _$trigger: JQuery;\n    protected _options: OffcanvasOptions;\n    protected _eventListeners: {\n        triggerClick?: ( event: Event ) => void;\n        overlayClick?: ( event: Event ) => void;\n    } = {};\n\n    /**\n     * Creates new Hero component with optional settings.\n     * @param {$element} Optional, element to be initialized as Hero component\n     * @param {options}  Optional settings object.\n     */\n    public constructor( $element?: JQuery, options?: OffcanvasOptions ) {\n        this._options = $.extend( {\n            className: 'cs-offcanvas',\n            triggerSelector: '.cs-offcanvas-trigger',\n            closeOnBlur: true,\n            drawerTransitionDuration: 300,\n            overlayTransitionDuration: 300,\n        }, options );\n\n        this._$element = $element || $( `.${this._options.className}` );\n        if ( this._$element.length === 0 ) {\n            return;\n        }\n\n        this._$drawer = this._$element.find( `.${this._options.className}__drawer` );\n        this._$overlay = this._$element.find( `.${this._options.className}__overlay` );\n        this._$trigger = $( this._options.triggerSelector );\n\n        this._addEventListeners();\n    }\n\n    public show(): Promise<Offcanvas> {\n        return Promise.all( [\n            this._showOverlay(),\n            this._showDrawer(),\n        ] ).then( () => this );\n    }\n\n    public hide(): Promise<Offcanvas> {\n        return Promise.all( [\n            this._hideOverlay(),\n            this._hideDrawer(),\n        ] ).then( () => this );\n    }\n\n    protected _showOverlay(): Promise<Offcanvas>  {\n        return new Promise( resolve => {\n            this._$overlay.addClass( `${this._options.className}__overlay--visible` );\n            setTimeout(\n                () => resolve( this ),\n                this._options.overlayTransitionDuration,\n            );\n        });\n    }\n\n    protected _hideOverlay(): Promise<Offcanvas>  {\n        return new Promise( resolve => {\n            this._$overlay.removeClass( `${this._options.className}__overlay--visible` );\n            setTimeout(\n                () => resolve( this ),\n                this._options.overlayTransitionDuration,\n            );\n        });\n    }\n\n    protected _showDrawer(): Promise<Offcanvas> {\n        return new Promise( resolve => {\n            this._$drawer.addClass( `${this._options.className}__drawer--visible` );\n            setTimeout(\n                () => resolve( this ),\n                this._options.drawerTransitionDuration,\n            );\n        });\n    }\n\n    protected _hideDrawer(): Promise<Offcanvas> {\n        return new Promise( resolve => {\n            this._$drawer.removeClass( `${this._options.className}__drawer--visible` );\n            setTimeout(\n                () => resolve( this ),\n                this._options.drawerTransitionDuration,\n            );\n        });\n    }\n\n    protected _addEventListeners(): void {\n        this._eventListeners.triggerClick = () => this.show();\n        this._$trigger.on( 'click', this._eventListeners.triggerClick );\n\n        if ( this._options.closeOnBlur ) {\n            this._eventListeners.overlayClick = () => this.hide();\n            this._$overlay.on( 'click', this._eventListeners.overlayClick );\n        }\n    }\n\n    protected _removeEventListeners(): void {\n        this._$trigger.off( 'click', this._eventListeners.triggerClick );\n        this._$overlay.off( 'click', this._eventListeners.overlayClick );\n    }\n}\n"],"names":[],"mappings":"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"}
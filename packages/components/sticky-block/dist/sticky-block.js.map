{"version":3,"file":null,"sources":["../../../utilities/breakpoint/src/breakpoint.ts","../src/sticky-block.ts"],"sourcesContent":["/**\n * Breakpoint utility for sharing breakpoints between CSS and JS.\n */\n\n/**\n * Converts dash-case to camelCase.\n * @type {Function}\n */\nconst camelCase: Function = ( input: string ): string => {\n    return input.toLowerCase().replace( /-(.)/g, function( match: string, group: string ): string {\n        return group.toUpperCase();\n    } );\n};\n\n/**\n * Returns object containign available breakpoints.\n * @return {Object} Object containing avaliable breakpoints in shape { breakpointName: pixelsNumber }\n */\nconst getAvaliableBreakpoints: Function = (): Object => JSON.parse( window.getComputedStyle( body, ':before' )\n    .getPropertyValue( 'content' ).slice( 1, -1 ).replace( /\\\\\"/g, '\"' ) );\n\n/**\n * Returs current breakpoint set by CSS.\n * @return {number} Current breakpoint in number of pixels.\n */\nconst getCurrentBreakpoint: Function = (): number => +window.getComputedStyle( body, ':after' )\n    .getPropertyValue( 'content' ).replace( /\"/g, '' );\n\nconst body: HTMLElement = document.querySelector( 'body' );\n/**\n * Module cache to export.\n * @type {Object}\n */\nconst breakpoint: any = {\n    current: getCurrentBreakpoint(),\n};\n\n/**\n * Available breakpoints cache.\n */\nconst breakpoints: Object = getAvaliableBreakpoints();\n// Extend breakpoint module with available breakpoint keys converted to camelCase.\nObject.keys( breakpoints ).forEach( ( breakpointName: string ): void => {\n    breakpoint[ camelCase( breakpointName ) ] = breakpoints[ breakpointName ];\n});\n\n// Let's check if we can register passive resize event for better performance.\nlet passiveOption: any = undefined;\ntry {\n    const opts: any = Object.defineProperty( {}, 'passive', {\n        get: function(): void {\n            passiveOption = { passive: true };\n        },\n    } );\n    window.addEventListener( 'test', null, opts );\n} catch (e) {}\n\n// Update current breakpoint on every resize.\nwindow.addEventListener( 'resize', () => {\n    breakpoint.current = getCurrentBreakpoint();\n}, passiveOption );\n\nexport default breakpoint;\n","import $ from 'jquery';\nimport Stickyfill from 'Stickyfill';\n\nimport breakpoint from '../../../utilities/breakpoint/src/breakpoint';\n\n/**\n * Navigation component options interface.\n */\ninterface StickyBlockOptions {\n    /**\n     * Breakpoint number as a border where above this value stickyBlock will be destroyed\n     * @type {number}\n     */\n    breakpoint?: number;\n};\n\nexport default class StickyBlock {\n    protected _$element: JQuery;\n\n    /**\n     * Creates new StickyBlock component with optional settings.\n     * @param  {StickyBlockOptions} options  Optional settings object.\n     */\n    public constructor( $element: JQuery, options?: StickyBlockOptions ) {\n        this._$element             = $element || $( '.cs-sticky-block' );\n        this._options              = $.extend( this._options, options );\n        this._options.breakpoint   = this._options.breakpoint || 1024;\n\n        if ( Stickyfill && this._$element.lengthÂ ) {\n            this._initStickyBlock();\n            this._setResizeEvent();\n        }\n    }\n\n    /**\n     * Destroys stickyBlock component's functionality.\n     * @param  {string} afterDestroyCssPosition  Optional CSS position after polyfill is destroyed.\n     */\n    public destroy( afterDestroyCssPosition?: string ): void {\n        Stickyfill.remove( this._$element[ 0 ] );\n        this._$element.css( 'position', afterDestroyCssPosition );\n    }\n\n    /**\n     * Rebuilds stickyBlock component.\n     * Call it after layout changes.\n     * Plugin launches it automatically after window resizes or device orientations changes.\n     */\n    public rebuild(): void {\n        Stickyfill.rebuild();\n    }\n\n    /**\n     * Initializes stickyBlock component's functionality.\n     */\n    protected _initStickyBlock(): void {\n        if ( breakpoint.current >= this._options.breakpoint ) {\n            this._$element.Stickyfill();\n        }\n    }\n\n    /**\n     * Toggles init or destroy based on given breakpoint\n     */\n    protected _setResizeEvent(): void {\n        const _this: any = this;\n\n        $( window ).on( 'resize', function(): void {\n            if ( breakpoint.current >= _this._options.breakpoint && !Stickyfill.stickies.length ) {\n                _this._$element.Stickyfill();\n            } else if ( breakpoint.current < _this._options.breakpoint && Stickyfill.stickies.length ) {\n                _this.destroy();\n            }\n        } );\n    }\n}\n"],"names":[],"mappings":"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"}
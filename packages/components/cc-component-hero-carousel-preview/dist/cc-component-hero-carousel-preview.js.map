{"version":3,"file":null,"sources":["../src/cc-component-hero-carousel-preview.ts"],"sourcesContent":["import $ from 'jquery';\nimport $t from 'mage/translate';\n\n/**\n * Single component information interface.\n */\ninterface IComponentInformation {\n    items: [\n        {\n            image: string,\n            headline: string,\n            subheadline: string,\n            paragraph: string,\n            ctaLabel: string,\n            ctaTarget: string,\n            displayVariant: string\n        },\n    ];\n};\n\n/**\n * Image teaser preview component.\n * This component is responsible for displaying preview of image teaser component in Layout Builder (admin panel)\n * @type {vuejs.ComponentOption} Vue component object.\n */\nconst ccComponentHeroCarouselPreview: vuejs.ComponentOption = {\n    template: `<div data-role=\"spinner\" class=\"cc-component-placeholder__loading\" v-show=\"isLoading\">\n        <div class=\"spinner\">\n            <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>\n        </div>\n    </div>\n    <div class=\"cc-component-hero-carousel-preview\" v-show=\"!isLoading\">\n        <div v-bind:class=\"sceneClass\" v-el:scene>\n            <div class=\"cc-component-hero-carousel-preview__slide\" v-if=\"configuration.items.length > 1\">\n                <img v-if=\"configuration.items[configuration.items.length - 1].image\" :src=\"configuration.items[configuration.items.length - 1].image\" class=\"cc-component-hero-carousel-preview__image\">\n                <div class=\"cc-component-hero-carousel-preview__slide-placeholder-wrapper\" v-show=\"!configuration.items[configuration.items.length - 1].image\">\n                    <svg class=\"cc-component-hero-carousel-preview__slide-placeholder\">\n                        <use xlink:href=\"#icon_image-placeholder\"></use>\n                    </svg>\n                </div>\n            </div>\n\n            <template v-for=\"(index, item) in configuration.items\">\n                <div class=\"cc-component-hero-carousel-preview__slide\" v-if=\"index < 2\">\n                    <img v-if=\"configuration.items[$index].image\" :src=\"configuration.items[$index].image\" class=\"cc-component-hero-carousel-preview__image\">\n                    <div class=\"cc-component-hero-carousel-preview__slide-placeholder-wrapper\" v-show=\"!configuration.items[$index].image\">\n                        <svg class=\"cc-component-hero-carousel-preview__slide-placeholder\">\n                            <use xlink:href=\"#icon_image-placeholder\"></use>\n                        </svg>\n                    </div>\n                    <div class=\"cc-component-hero-carousel-preview__slide-content\" v-if=\"index == 0 || configuration.items.length == 1\">\n                        <div class=\"cc-component-hero-carousel-preview__thumbs\">\n                            <template v-for=\"(idx, slide) in configuration.items\">\n                                <img v-if=\"configuration.items[idx].image\" :src=\"configuration.items[idx].image\" class=\"cc-component-hero-carousel-preview__thumb\">\n                                <div class=\"cc-component-hero-carousel-preview__thumb-placeholder-wrapper\" v-show=\"!configuration.items[idx].image\">\n                                    <svg class=\"cc-component-hero-carousel-preview__thumb-placeholder\">\n                                        <use xlink:href=\"#icon_image-placeholder\"></use>\n                                    </svg>\n                                </div>\n                            </template>\n                        </div>\n                        <div class=\"cc-component-hero-carousel-preview__slide-content-info\">\n                            <h2 class=\"cc-component-hero-carousel-preview__headline\" v-if=\"configuration.items[$index].headline\">{{ configuration.items[$index].headline }}</h2>\n                            <h3 class=\"cc-component-hero-carousel-preview__subheadline\" v-if=\"configuration.items[$index].subheadline\">{{ configuration.items[$index].subheadline }}</h3>\n                            <p class=\"cc-component-hero-carousel-preview__paragraph\" v-if=\"configuration.items[$index].paragraph\">{{ configuration.items[$index].paragraph }}</p>\n                            <template v-if=\"configuration.items[$index].href\">\n                                <button type=\"button\" class=\"cc-component-hero-carousel-preview__button\" v-if=\"configuration.items[$index].ctaLabel\">{{ configuration.items[$index].ctaLabel }}</button>\n                            </template>\n                        </div>\n                    </div>\n                </div>\n            </template>\n        </div>\n    </div>`,\n    props: {\n        configuration: {\n            type: Object,\n        },\n        /**\n         * Class property support to enable BEM mixes.\n         */\n        class: {\n            type: [ String, Object, Array ],\n            default: '',\n        },\n        isLoading: {\n            type: Boolean,\n            default: true,\n        }\n    },\n    ready(): void {\n        this.setImagesLoadListener();\n        this.hideEmptySlideContents();\n    },\n    computed: {\n        sceneClass(): string {\n            if ( this.configuration.items.length > 1 ) {\n                return 'cc-component-hero-carousel-preview__scene';\n            }\n\n            return 'cc-component-hero-carousel-preview__scene cc-component-hero-carousel-preview__scene--single';\n        },\n    },\n    methods: {\n        /**\n         * Checks for status of images if they're loaded.\n         * After they're all loaded spinner is hidden and content displayed.\n         */\n        setImagesLoadListener(): void {\n            const _this: any = this;\n            const $images = $( this.$els.scene ).find( 'img' );\n            let imagesCount: number = $images.length;\n\n            if ( imagesCount ) {\n                $images.load( function(): void {\n                    imagesCount--;\n                    if ( !imagesCount ) {\n                        _this.isLoading = false;\n                        $images.each( function(): void {\n                            $( this ).addClass( 'cc-component-hero-carousel-preview__image--border' );\n                        } );\n                        window.setTimeout( (): void => {\n                            $( _this.$els.scene ).find( '.cc-component-hero-carousel-preview__slide, .cc-component-hero-carousel-preview__slide-placeholder-wrapper' ).css( 'min-height', $( _this.$els.scene ).outerHeight() );\n                        }, 150 );\n                        \n                    }\n                } ).filter( function(): boolean { return this.complete; } ).load();\n            } else {\n                _this.isLoading = false;\n            }\n        },\n        hideEmptySlideContents(): any {\n            $( this.$els.scene ).find( '.cc-component-hero-carousel-preview__slide-content-info' ).each( function(): void {\n                if ( !$( this ).children().length ) {\n                    $( this ).hide();\n                }\n            } );\n        },\n    },\n};\n\nexport default ccComponentHeroCarouselPreview;\n"],"names":[],"mappings":";;;;;;;;AAoBA;;;;;AAKA,IAAM,8BAA8B,GAA0B;IAC1D,QAAQ,EAAE,k3HA+CH;IACP,KAAK,EAAE;QACH,aAAa,EAAE;YACX,IAAI,EAAE,MAAM;SACf;;;;QAID,KAAK,EAAE;YACH,IAAI,EAAE,CAAE,MAAM,EAAE,MAAM,EAAE,KAAK,CAAE;YAC/B,OAAO,EAAE,EAAE;SACd;QACD,SAAS,EAAE;YACP,IAAI,EAAE,OAAO;YACb,OAAO,EAAE,IAAI;SAChB;KACJ;IACD,KAAK;QACD,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,sBAAsB,EAAE,CAAC;KACjC;IACD,QAAQ,EAAE;QACN,UAAU;YACN,IAAK,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,CAAE,EAAE;gBACvC,OAAO,2CAA2C,CAAC;aACtD;YAED,OAAO,6FAA6F,CAAC;SACxG;KACJ;IACD,OAAO,EAAE;;;;;QAKL,qBAAqB;YACjB,IAAM,KAAK,GAAQ,IAAI,CAAC;YACxB,IAAM,OAAO,GAAG,CAAC,CAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAE,CAAC,IAAI,CAAE,KAAK,CAAE,CAAC;YACnD,IAAI,WAAW,GAAW,OAAO,CAAC,MAAM,CAAC;YAEzC,IAAK,WAAY,EAAE;gBACf,OAAO,CAAC,IAAI,CAAE;oBACV,WAAW,EAAE,CAAC;oBACd,IAAK,CAAC,WAAY,EAAE;wBAChB,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;wBACxB,OAAO,CAAC,IAAI,CAAE;4BACV,CAAC,CAAE,IAAI,CAAE,CAAC,QAAQ,CAAE,mDAAmD,CAAE,CAAC;yBAC7E,CAAE,CAAC;wBACJ,MAAM,CAAC,UAAU,CAAE;4BACf,CAAC,CAAE,KAAK,CAAC,IAAI,CAAC,KAAK,CAAE,CAAC,IAAI,CAAE,4GAA4G,CAAE,CAAC,GAAG,CAAE,YAAY,EAAE,CAAC,CAAE,KAAK,CAAC,IAAI,CAAC,KAAK,CAAE,CAAC,WAAW,EAAE,CAAE,CAAC;yBACvM,EAAE,GAAG,CAAE,CAAC;qBAEZ;iBACJ,CAAE,CAAC,MAAM,CAAE,cAAsB,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAE,CAAC,IAAI,EAAE,CAAC;aACtE;iBAAM;gBACH,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;aAC3B;SACJ;QACD,sBAAsB;YAClB,CAAC,CAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAE,CAAC,IAAI,CAAE,yDAAyD,CAAE,CAAC,IAAI,CAAE;gBACzF,IAAK,CAAC,CAAC,CAAE,IAAI,CAAE,CAAC,QAAQ,EAAE,CAAC,MAAO,EAAE;oBAChC,CAAC,CAAE,IAAI,CAAE,CAAC,IAAI,EAAE,CAAC;iBACpB;aACJ,CAAE,CAAC;SACP;KACJ;CACJ,CAAC,AAEF;;;;"}
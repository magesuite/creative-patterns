{"version":3,"file":null,"sources":["../src/offcanvas-navigation.ts"],"sourcesContent":["import $ from 'jquery';\nimport Offcanvas from '../../offcanvas/src/offcanvas';\n\n/**\n * Component options interface.\n */\nexport interface OffcanvasNavigationOptions {\n    className?: string;\n    contentSetter?: ( offcanvasNavigation: OffcanvasNavigation ) => void;\n};\n/**\n * Offcanvas navigation component responsible for multilevel offcanvas navigation menu.\n */\nexport default class OffcanvasNavigation {\n    protected _$element: JQuery;\n    protected _$parentLink: JQuery;\n    protected _$returnLink: JQuery;\n\n    protected _options: OffcanvasNavigationOptions;\n    protected _eventListeners: {\n        offcanvasHide?: ( event: Event, offcanvas: Offcanvas ) => void;\n        parentLinkClick?: ( event: Event ) => void;\n        returnLinkClick?: ( event: Event ) => void;\n    } = {};\n\n    /**\n     * Creates offcanvas navigation with optional given element and options.\n     * @param  {JQuery}                     $element jQuery element to initialize navigation on.\n     * @param  {OffcanvasNavigationOptions} options  Optional settings for a component.\n     */\n    public constructor( $element?: JQuery, options?: OffcanvasNavigationOptions ) {\n        this._options = $.extend( {\n            className: 'offcanvas-navigation',\n            contentSetter: null,\n        }, options );\n\n        this._$element = $element || $( `.${this._options.className}` );\n        if ( this._$element.length === 0 ) {\n            return;\n        }\n\n        if ( typeof this._options.contentSetter === 'function' ) {\n            this._options.contentSetter( this );\n        }\n\n        this._$parentLink = this._$element.find( `.${this._options.className}__link--parent` );\n        this._$returnLink = this._$element.find( `.${this._options.className}__link--return` );\n\n        this._addEventListeners();\n    }\n\n    /**\n     * Returns component element.\n     * @return {JQuery} Component element.\n     */\n    public getElement(): JQuery {\n        return this._$element;\n    }\n\n    /**\n     * Shows next navigation level based on clicked parent link.\n     * @param {Event} event [description]\n     */\n    protected _showLevel( event: Event ): void  {\n        event.preventDefault();\n        const $levelToShow = $( event.target ).next();\n        const $currentLevel = $(`.${this._options.className}__list--current`);\n        if ( $currentLevel.length > 0 ) {\n            $currentLevel.animate( { scrollTop: 0 }, 'medium', () => {\n                $currentLevel.removeClass( `${this._options.className}__list--current` );\n                $levelToShow.addClass( `${this._options.className}__list--active ${this._options.className}__list--current` );\n            } );\n        } else {\n            $levelToShow.addClass( `${this._options.className}__list--active ${this._options.className}__list--current` );\n        }\n\n    }\n\n    /**\n     * Hides current navigation level based on clicked return link.\n     * @param {Event} event [description]\n     */\n    protected _hideLevel( event: Event ): void  {\n        event.preventDefault();\n        const $levelToHide = $( event.target ).closest( `.${this._options.className}__list` );\n        $levelToHide.removeClass( `${this._options.className}__list--active ${this._options.className}__list--current` );\n        $levelToHide.closest( `.${this._options.className}__list--active` ).addClass( `${this._options.className}__list--current` );\n    }\n    /**\n     * Resets levels to root.\n     */\n    protected _resetLevels(): void {\n        this._$element.find(`.${this._options.className}__list` ).removeClass( `${this._options.className}__list--active ${this._options.className}__list--current` );\n    }\n    /**\n     * Sets up event listeners for a component.\n     */\n    protected _addEventListeners(): void {\n        this._eventListeners.offcanvasHide = this._resetLevels.bind( this );\n        $( document ).on( 'offcanvas-hide', this._eventListeners.offcanvasHide );\n\n        this._eventListeners.parentLinkClick = this._showLevel.bind( this );\n        this._$parentLink.on( 'click', this._eventListeners.parentLinkClick );\n\n        this._eventListeners.returnLinkClick = this._hideLevel.bind( this );\n        this._$returnLink.on( 'click', this._eventListeners.returnLinkClick );\n    }\n    /**\n     * Removes event listeners for a component.\n     */\n    protected _removeEventListeners(): void {\n        $( document ).off( 'offcanvas-hide', this._eventListeners.offcanvasHide );\n        this._$parentLink.off( 'click', this._eventListeners.parentLinkClick );\n        this._$returnLink.off( 'click', this._eventListeners.returnLinkClick );\n    }\n}\n"],"names":[],"mappings":"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"}